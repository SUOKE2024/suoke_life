# SuokeBench 专属评测体系

SuokeBench是索克生活APP专属的评测体系，用于系统性衡量索克生活APP及四大智能体（小艾、小克、老克、索儿）的功能完备度、智能水平与用户体验。本评测体系借鉴业界领先的健康类AI评测方法，结合中医特色场景，构建了一套全面、可量化、可复现的评测标准。

## 目录

- [设计原则](#设计原则)
- [评测维度与关键指标](#评测维度与关键指标)
- [数据集构成](#数据集构成)
- [评测流程](#评测流程)
- [版本规划](#版本规划)
- [贡献指南](#贡献指南)

## 设计原则

SuokeBench评测体系的设计遵循以下原则：

1. **标准化与可复现**
   - 所有评测脚本统一存放于`benchmarks/suokebench/`目录
   - 使用Docker容器确保评测环境的一致性
   - 通过GitHub Actions自动运行评测，保证结果可追溯、可对比
   - 详细记录每次评测的参数、环境和结果

2. **中医特色场景覆盖**
   - 重点评估四诊合参、体质辨识、药食同源推荐等索克核心能力
   - 构建中医知识库问答评测集，覆盖常见中医理论与实践
   - 评测多模态理解能力，包括舌象、面色、脉象等中医特色内容

3. **多维度综合衡量**
   - 同时关注算法准确率、智能体协作效率、用户体验、数据隐私与端侧性能
   - 针对不同技术路线设计特定评测方法
   - 兼顾定量评估与定性分析

4. **持续集成**
   - 每次模型或算法升级均自动触发评测，生成评测报告
   - 建立性能基线，监控性能变化趋势
   - 及时发现性能退化，指导优化方向

## 评测维度与关键指标

SuokeBench评测体系涵盖以下核心维度和关键指标：

### 1. 中医辨证准确性

评估智能体进行中医体质辨识、症状分析和健康建议的准确性。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 体质辨识准确率 | 九种体质判断Top-1准确率 | ≥85% |
| 辨证一致率 | AI结果与3名中医师盲评结果的一致程度 | ≥80% |
| 舌象特征识别 | 舌质、舌苔等关键特征识别准确率 | ≥90% |
| 面色辨识准确率 | 面色五色(青、赤、黄、白、黑)识别准确率 | ≥88% |
| 脉象分型准确率 | 28种脉象波形分型准确率 | ≥75% |

**评测方法**：
- 与专家标注的标准数据集对比
- 与专业中医师的人工评估结果对比
- 交叉验证不同智能体的分析结果

### 2. 健康管理效果

评估智能体生成个性化健康方案的质量和可行性。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 方案相关性 | 生成方案与体质/症状的相关程度(ROUGE-L) | ≥0.75 |
| 方案可行性 | 专家评定的方案可执行度(1-5分) | ≥4.0 |
| 方案接受率 | 用户接受并实施方案的比例 | ≥70% |
| 知识准确性 | 健康知识解答的准确率 | ≥90% |
| 建议个性化程度 | 方案针对个人特点的定制化程度(1-5分) | ≥4.2 |

**评测方法**：
- ROUGE-L、BLEU等NLP评估指标
- 专家组对方案质量的盲评
- 用户反馈数据分析

### 3. 智能体协作

评估四大智能体的协同工作能力和交互效率。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 任务成功率 | 复杂任务的完成成功率 | ≥85% |
| 平均交互轮次 | 完成任务所需的平均对话轮次 | ≤8轮 |
| 协作延迟 | 智能体间协作响应的平均延迟 | ≤800ms |
| 任务路由准确率 | 将用户请求正确路由到合适智能体的准确率 | ≥90% |
| 上下文维持能力 | 长对话中保持上下文连贯性的能力(1-5分) | ≥4.0 |

**评测方法**：
- 多轮对话测试集测试
- 协作场景模拟
- 任务完成时间和质量评估

### 4. 数据隐私与安全

评估系统在保护用户隐私和数据安全方面的表现。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 零知识证明验证率 | 体质证明等零知识验证的成功率 | ≥99% |
| 隐私泄露评分 | π-Leakage隐私泄露评分(越低越好) | ≤0.05 |
| 验证时间 | 零知识证明验证所需时间 | ≤800ms |
| 安全合规度 | 符合GDPR等隐私法规的程度(1-5分) | 5.0 |
| 数据访问控制 | 精细化权限控制有效性测试通过率 | 100% |

**评测方法**：
- 安全测试用例运行
- 渗透测试与安全审计
- 合规检查清单评估

### 5. 端侧性能

评估系统在移动端和边缘设备上的运行性能。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 响应延迟(P50) | 50%请求的响应时间 | ≤300ms |
| 响应延迟(P95) | 95%请求的响应时间 | ≤800ms |
| 内存占用 | 运行时峰值内存占用 | ≤250MB |
| 电池消耗 | 每小时电池消耗百分比 | ≤5% |
| 离线功能可用率 | 无网络情况下功能可用比例 | ≥60% |

**评测方法**：
- 基准设备上的性能测试
- 电池消耗监测
- 离线场景模拟测试

### 6. 多语言/方言覆盖

评估系统对多语言和方言的处理能力。

| 指标 | 说明 | 目标值 |
|-----|------|-------|
| 方言识别率 | 27种主要方言的语音识别词错率(WER) | ≤15% |
| 方言理解准确率 | 方言指令理解准确率 | ≥80% |
| 方言覆盖广度 | 支持的方言数量 | ≥27种 |
| 翻译质量 | 方言到标准普通话的翻译质量(BLEU) | ≥0.70 |

**评测方法**：
- 多方言语音识别测试集
- 方言理解任务评估
- 用户满意度调查

## 数据集构成

SuokeBench使用以下专用数据集进行评测：

### 1. TCM-4D Dataset

中医四诊合参评测数据集，包含：
- **舌象图片库**: 20,000张标注舌象图片，覆盖不同体质和病症
- **面色视频集**: 5,000段标注面色视频，包含五色辨识标准样本
- **脉波形数据**: 10,000条脉象波形记录，涵盖28种常见脉象类型
- **语音问诊记录**: 50小时带标注的问诊录音，包含症状描述和情绪状态

数据来源：医院合作采集、专家标注、文献整理，所有数据均经脱敏处理。

### 2. HealthPlan-TCM

中医健康方案评测数据集，包含：
- 5,000条针对不同体质与生活场景的健康管理案例
- 每个案例包含用户信息、症状描述、专家制定的健康方案和效果跟踪
- 覆盖9种体质与6大生活场景的组合

数据来源：专业中医师提供的真实案例（脱敏）、文献整理、专家共识。

### 3. SuokeDialogue

智能体协作对话数据集，包含：
- 3,000轮真实用户与智能体的多轮对话记录
- 标注了每轮对话的意图、情绪、满意度和任务完成度
- 包含单智能体对话和多智能体协作对话样本

数据来源：内部测试对话、真实用户交互（经用户授权）。

### 4. Privacy-ZKP Set

隐私与安全测试数据集，包含：
- 100组零知识证明测试用例，覆盖健康数据验证场景
- 异常场景和攻击样本，用于测试系统安全性
- 合规性检查清单和测试用例

数据来源：安全专家设计的测试用例，模拟攻击场景。

## 评测流程

SuokeBench评测流程设计为自动化和标准化的过程，确保结果的可靠性和可比较性：

### 1. 环境准备

```bash
# 安装评测依赖
cd benchmarks/suokebench
make setup
```

安装评测所需的依赖包和工具，包括：
- PyTorch/TensorFlow评测框架
- 评测指标计算库
- 数据预处理工具
- 可视化报告工具

### 2. 运行评测

```bash
# 运行全部评测（自动检测可用资源）
make run

# 运行特定模块评测
make run MODULE=tcm_diagnosis
```

评测过程会：
- 自动下载或加载评测数据集
- 配置评测参数
- 执行测试用例
- 收集性能指标
- 生成评测日志

### 3. 生成报告

```bash
# 生成HTML评测报告
make report
```

报告内容包括：
- 各维度评测结果摘要
- 详细性能指标与基准对比
- 性能变化趋势图表
- 发现的问题与改进建议

### 4. CI集成

SuokeBench已集成到CI/CD流程中：

```bash
# CI环境运行（精简版本，10分钟内完成）
make ci
```

CI评测会：
- 在Pull Request阶段自动触发
- 运行关键评测子集
- 将结果与基准比较
- 在性能退化时发出警告

## 版本规划

SuokeBench将持续演进，以适应技术发展和新需求：

| 版本 | 功能 | 预计时间 |
|------|------|----------|
| v0.1 | 内部基线：中医辨证 + 端侧性能 | 2024-Q3 |
| v0.5 | 引入智能体协作与隐私评测 | 2024-Q4 |
| v1.0 | 公共发布，开放评测排行榜 | 2025-Q1 |
| v1.5 | 扩展多语言/方言支持，增强用户体验评测 | 2025-Q2 |
| v2.0 | 引入真实世界长期效果评测 | 2025-Q3 |

## 贡献指南

我们欢迎社区贡献新的评测任务、数据集和评测方法：

### 如何贡献新的评测任务

1. 创建任务描述文档，包括：
   - 任务目标与背景
   - 评测指标与目标值
   - 数据集需求
   - 评测方法细节

2. 实现评测脚本，遵循以下结构：
   ```
   benchmarks/suokebench/tasks/your_task_name/
   ├── __init__.py
   ├── config.py         # 配置参数
   ├── data_loader.py    # 数据加载逻辑
   ├── metrics.py        # 指标计算方法
   ├── runner.py         # 评测运行器
   └── README.md         # 任务说明文档
   ```

3. 提交Pull Request，包含完整的测试用例和文档

### 如何贡献新的数据集

1. 准备数据集，确保：
   - 数据已经脱敏，符合隐私保护要求
   - 提供清晰的数据格式说明和示例
   - 包含必要的许可信息

2. 创建数据集卡片(dataset_card.md)，描述：
   - 数据来源与采集方法
   - 数据统计特征
   - 标注标准与质量控制方法
   - 伦理合规说明

3. 实现数据加载和预处理脚本

4. 提交Pull Request，说明数据集的价值和用途

---

SuokeBench将与索克生活APP一同演进，不断完善评测方法和标准，打造面向"中医+智能健康"领域的开源评测新标准。欢迎各界专家和开发者参与贡献，共同推动中医数字化和智能健康技术的发展。 