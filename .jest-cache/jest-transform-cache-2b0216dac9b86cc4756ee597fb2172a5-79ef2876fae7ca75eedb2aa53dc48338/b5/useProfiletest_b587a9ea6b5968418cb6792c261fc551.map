{"version":3,"names":["_getJestObj","mock","Alert","alert","jest","fn","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_reactNative2","_useProfile","_require","mockAlert","describe","beforeEach","clearAllMocks","it","_renderHook","renderHook","useProfile","result","expect","current","userProfile","toBeDefined","agentInteractions","toHaveLength","achievements","benefits","activeTab","toBe","loading","_renderHook2","act","setActiveTab","_renderHook3","agent","chatWithAgent","toHaveBeenCalledWith","agentName","stringContaining","any","Array","_renderHook4","achievement","viewAchievement","title","description","_renderHook5","benefit","useBenefit","toHaveBeenCalled","_renderHook6","handleSettingPress","default","_renderHook7","updates","name","updateProfile","_renderHook8","getHealthScoreColor","_renderHook9","getMemberLevelText","_renderHook0","stats","totalAchievements","toBeGreaterThan","unlockedAchievements","toBeGreaterThanOrEqual","achievementProgress","availableBenefits","_renderHook1","filterAchievements","undefined","every","a","unlocked","lockedAchievements","healthAchievements","category","_renderHook10","recommendations","getRecommendedActions","isArray"],"sources":["useProfile.test.ts"],"sourcesContent":["import { renderHook, act } from '@testing-library/react-native';\nimport { Alert } from 'react-native';\nimport { useProfile } from '../../hooks/useProfile';\nimport { HealthAchievement } from '../../types/profile';\n\n// Mock Alert\njest.mock('react-native', () => ({\n  Alert: {\n    alert: jest.fn(),\n  },\n}));\n\nconst mockAlert = Alert.alert as jest.MockedFunction<typeof Alert.alert>;\n\ndescribe('useProfile', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('应该初始化默认状态', () => {\n    const { result } = renderHook(() => useProfile());\n\n    expect(result.current.userProfile).toBeDefined();\n    expect(result.current.agentInteractions).toHaveLength(4);\n    expect(result.current.achievements).toBeDefined();\n    expect(result.current.benefits).toBeDefined();\n    expect(result.current.activeTab).toBe('agents');\n    expect(result.current.loading).toBe(false);\n  });\n\n  it('应该正确切换活动标签', () => {\n    const { result } = renderHook(() => useProfile());\n\n    act(() => {\n      result.current.setActiveTab('achievements');\n    });\n\n    expect(result.current.activeTab).toBe('achievements');\n\n    act(() => {\n      result.current.setActiveTab('benefits');\n    });\n\n    expect(result.current.activeTab).toBe('benefits');\n  });\n\n  it('应该正确处理与智能体聊天', () => {\n    const { result } = renderHook(() => useProfile());\n    const agent = result.current.agentInteractions[0];\n\n    act(() => {\n      result.current.chatWithAgent(agent);\n    });\n\n    expect(mockAlert).toHaveBeenCalledWith(\n      `与${agent.agentName}聊天`,\n      expect.stringContaining(agent.agentName),\n      expect.any(Array)\n    );\n  });\n\n  it('应该正确查看成就详情', () => {\n    const { result } = renderHook(() => useProfile());\n    const achievement = result.current.achievements[0];\n\n    act(() => {\n      result.current.viewAchievement(achievement);\n    });\n\n    expect(mockAlert).toHaveBeenCalledWith(\n      achievement.title,\n      expect.stringContaining(achievement.description),\n      expect.any(Array)\n    );\n  });\n\n  it('应该正确使用会员特权', () => {\n    const { result } = renderHook(() => useProfile());\n    const benefit = result.current.benefits[0];\n\n    act(() => {\n      result.current.useBenefit(benefit);\n    });\n\n    expect(mockAlert).toHaveBeenCalled();\n  });\n\n  it('应该正确处理设置项点击', () => {\n    const { result } = renderHook(() => useProfile());\n\n    // 测试退出登录\n    act(() => {\n      result.current.handleSettingPress('logout');\n    });\n\n    expect(mockAlert).toHaveBeenCalledWith(\n      '退出登录',\n      '确定要退出登录吗？',\n      expect.any(Array)\n    );\n  });\n\n  it('应该正确更新用户资料', async () => {\n    const { result } = renderHook(() => useProfile());\n    const updates = { name: '新用户名' };\n\n    await act(async () => {\n      await result.current.updateProfile(updates);\n    });\n\n    expect(result.current.userProfile.name).toBe('新用户名');\n    expect(mockAlert).toHaveBeenCalledWith('更新成功', '个人资料已更新');\n  });\n\n  it('应该正确获取健康分数颜色', () => {\n    const { result } = renderHook(() => useProfile());\n\n    expect(result.current.getHealthScoreColor(90)).toBe('#34C759');\n    expect(result.current.getHealthScoreColor(70)).toBe('#FF9500');\n    expect(result.current.getHealthScoreColor(50)).toBe('#FF3B30');\n  });\n\n  it('应该正确获取会员等级文本', () => {\n    const { result } = renderHook(() => useProfile());\n\n    expect(result.current.getMemberLevelText('gold')).toBe('黄金会员');\n    expect(result.current.getMemberLevelText('silver')).toBe('白银会员');\n    expect(result.current.getMemberLevelText('unknown')).toBe('普通会员');\n  });\n\n  it('应该正确计算统计数据', () => {\n    const { result } = renderHook(() => useProfile());\n\n    expect(result.current.stats.totalAchievements).toBeGreaterThan(0);\n    expect(result.current.stats.unlockedAchievements).toBeGreaterThanOrEqual(0);\n    expect(result.current.stats.achievementProgress).toBeGreaterThanOrEqual(0);\n    expect(result.current.stats.availableBenefits).toBeGreaterThanOrEqual(0);\n  });\n\n  it('应该正确过滤成就', () => {\n    const { result } = renderHook(() => useProfile());\n\n    // 过滤已解锁的成就\n    const unlockedAchievements = result.current.filterAchievements(undefined, true);\n    expect(unlockedAchievements.every((a: HealthAchievement) => a.unlocked)).toBe(true);\n\n    // 过滤未解锁的成就\n    const lockedAchievements = result.current.filterAchievements(undefined, false);\n    expect(lockedAchievements.every((a: HealthAchievement) => !a.unlocked)).toBe(true);\n\n    // 按分类过滤\n    const healthAchievements = result.current.filterAchievements('health');\n    expect(healthAchievements.every((a: HealthAchievement) => a.category === 'health')).toBe(true);\n  });\n\n  it('应该正确获取推荐操作', () => {\n    const { result } = renderHook(() => useProfile());\n\n    const recommendations = result.current.getRecommendedActions();\n    expect(Array.isArray(recommendations)).toBe(true);\n  });\n}); "],"mappings":"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","ignoreList":[]}