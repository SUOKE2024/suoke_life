{"version":3,"names":[],"sources":["types.ts"],"sourcesContent":["// 小艾智能体核心类型定义\nexport interface ChatContext {\n  userId: string;\n  sessionId: string;\n  conversationHistory: ChatMessage[];\n  hasImages?: boolean;\n  images?: ImageData[];\n  hasAudio?: boolean;\n  audio?: AudioData[];\n  hasPalpationData?: boolean;\n  palpationData?: PalpationData[];\n  userProfile?: UserProfile;\n  timestamp: number;\n}\n\nexport interface ChatMessage {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: number;\n  metadata?: {\n    diagnosisIntent?: DiagnosisIntent;\n    diagnosisResults?: FourDiagnosisResults;\n    suggestions?: string[];\n  };\n}\n\nexport interface ChatResponse {\n  text: string;\n  actions?: DiagnosisAction[];\n  suggestions?: string[];\n  followUp?: string;\n  diagnosisResults?: FourDiagnosisResults;\n  timestamp: number;\n}\n\nexport interface DiagnosisIntent {\n  needsInquiry: boolean;\n  needsLookDiagnosis: boolean;\n  needsListenDiagnosis: boolean;\n  needsPalpationDiagnosis: boolean;\n  confidence: number;\n  extractedSymptoms: string[];\n  urgencyLevel: 'low' | 'medium' | 'high' | 'emergency';\n}\n\nexport interface DiagnosisAction {\n  type: 'inquiry' | 'look' | 'listen' | 'palpation';\n  prompt: string;\n  autoStart?: boolean;\n  optional?: boolean;\n  priority: number;\n}\n\nexport interface FourDiagnosisResults {\n  inquiry?: InquiryResult;\n  look?: LookResult;\n  listen?: ListenResult;\n  palpation?: PalpationResult;\n  integrated?: IntegratedDiagnosis;\n}\n\n// 四诊服务结果类型\nexport interface InquiryResult {\n  sessionId: string;\n  detectedSymptoms: SymptomInfo[];\n  tcmPatterns: TCMPattern[];\n  healthProfile: HealthProfile;\n  recommendations: string[];\n  confidence: number;\n}\n\nexport interface LookResult {\n  analysisId: string;\n  faceAnalysis?: FaceAnalysis;\n  tongueAnalysis?: TongueAnalysis;\n  bodyAnalysis?: BodyAnalysis;\n  overallAssessment: string;\n  confidence: number;\n}\n\nexport interface ListenResult {\n  analysisId: string;\n  voiceFeatures: VoiceFeatures;\n  emotionalState: EmotionalState;\n  respiratoryAnalysis?: RespiratoryAnalysis;\n  overallAssessment: string;\n  confidence: number;\n}\n\nexport interface PalpationResult {\n  analysisId: string;\n  pulseAnalysis?: PulseAnalysis;\n  abdominalAnalysis?: AbdominalAnalysis;\n  skinAnalysis?: SkinAnalysis;\n  overallAssessment: string;\n  confidence: number;\n}\n\nexport interface IntegratedDiagnosis {\n  overallAssessment: string;\n  tcmDiagnosis: TCMDiagnosis;\n  healthRecommendations: HealthRecommendation[];\n  riskFactors: RiskFactor[];\n  followUpActions: FollowUpAction[];\n  confidence: number;\n}\n\n// 健康相关类型\nexport interface SymptomInfo {\n  name: string;\n  severity: 'mild' | 'moderate' | 'severe' | 'extreme';\n  duration: number; // 持续时间（小时）\n  description: string;\n  confidence: number;\n}\n\nexport interface TCMPattern {\n  patternName: string;\n  description: string;\n  symptoms: string[];\n  confidence: number;\n}\n\nexport interface HealthProfile {\n  constitution: TCMConstitution;\n  lifestyle: LifestyleCharacteristics;\n  riskFactors: RiskFactor[];\n}\n\nexport interface TCMConstitution {\n  type: 'balanced' | 'qi_deficiency' | 'yang_deficiency' | 'yin_deficiency' | \n        'phlegm_dampness' | 'damp_heat' | 'blood_stasis' | 'qi_stagnation' | 'special';\n  score: number;\n  description: string;\n}\n\nexport interface LifestyleCharacteristics {\n  diet: string[];\n  exercise: string[];\n  sleep: string[];\n  stress: string[];\n}\n\nexport interface RiskFactor {\n  factor: string;\n  level: 'low' | 'medium' | 'high';\n  description: string;\n  preventionSuggestions: string[];\n}\n\n// 多模态数据类型\nexport interface ImageData {\n  id: string;\n  type: 'face' | 'tongue' | 'body' | 'other';\n  uri: string;\n  base64?: string;\n  metadata?: {\n    width: number;\n    height: number;\n    timestamp: number;\n  };\n}\n\nexport interface AudioData {\n  id: string;\n  type: 'voice' | 'cough' | 'breathing' | 'other';\n  uri: string;\n  base64?: string;\n  metadata?: {\n    duration: number;\n    sampleRate: number;\n    timestamp: number;\n  };\n}\n\nexport interface PalpationData {\n  id: string;\n  type: 'pulse' | 'abdominal' | 'skin' | 'other';\n  sensorData: any;\n  metadata?: {\n    duration: number;\n    timestamp: number;\n  };\n}\n\n// 分析结果详细类型\nexport interface FaceAnalysis {\n  complexion: string;\n  expression: string;\n  eyeCondition: string;\n  overallHealth: string;\n}\n\nexport interface TongueAnalysis {\n  tongueBody: string;\n  tongueCoating: string;\n  moisture: string;\n  tcmAssessment: string;\n}\n\nexport interface BodyAnalysis {\n  posture: string;\n  movement: string;\n  overallVitality: string;\n}\n\nexport interface VoiceFeatures {\n  pitch: number;\n  tone: string;\n  clarity: string;\n  strength: string;\n}\n\nexport interface EmotionalState {\n  mood: string;\n  stress: string;\n  energy: string;\n  confidence: number;\n}\n\nexport interface RespiratoryAnalysis {\n  breathingPattern: string;\n  lungSounds: string;\n  assessment: string;\n}\n\nexport interface PulseAnalysis {\n  rate: number;\n  rhythm: string;\n  strength: string;\n  tcmPulseType: string;\n}\n\nexport interface AbdominalAnalysis {\n  tenderness: string;\n  tension: string;\n  temperature: string;\n}\n\nexport interface SkinAnalysis {\n  texture: string;\n  temperature: string;\n  moisture: string;\n  elasticity: string;\n}\n\n// 中医诊断类型\nexport interface TCMDiagnosis {\n  syndrome: string;\n  pathogenesis: string;\n  treatment: string;\n  prognosis: string;\n}\n\nexport interface HealthRecommendation {\n  category: 'diet' | 'exercise' | 'lifestyle' | 'medication' | 'therapy';\n  title: string;\n  description: string;\n  priority: 'low' | 'medium' | 'high';\n  timeframe: string;\n}\n\nexport interface FollowUpAction {\n  action: string;\n  timeframe: string;\n  priority: 'low' | 'medium' | 'high';\n  description: string;\n}\n\n// 用户相关类型\nexport interface UserProfile {\n  id: string;\n  basicInfo: {\n    age: number;\n    gender: 'male' | 'female' | 'other';\n    height: number;\n    weight: number;\n  };\n  medicalHistory: MedicalRecord[];\n  preferences: UserPreferences;\n  accessibilityNeeds?: AccessibilityNeeds;\n}\n\nexport interface MedicalRecord {\n  condition: string;\n  diagnosisDate: number;\n  treatment: string;\n  status: 'active' | 'resolved' | 'chronic';\n}\n\nexport interface UserPreferences {\n  language: string;\n  communicationStyle: 'formal' | 'casual' | 'caring';\n  diagnosisPreferences: {\n    autoStartDiagnosis: boolean;\n    preferredDiagnosisTypes: string[];\n    privacyLevel: 'low' | 'medium' | 'high';\n  };\n}\n\nexport interface AccessibilityNeeds {\n  visual: boolean;\n  hearing: boolean;\n  motor: boolean;\n  cognitive: boolean;\n  preferences: {\n    fontSize: 'small' | 'medium' | 'large' | 'extra-large';\n    highContrast: boolean;\n    voiceOutput: boolean;\n    simplifiedInterface: boolean;\n  };\n}\n\n// 小艾智能体接口\nexport interface XiaoaiAgent {\n  // 基础对话功能\n  chat(message: string, context: ChatContext): Promise<ChatResponse>;\n  analyzeHealthData(data: any): Promise<any>;\n  generateSuggestions(profile: UserProfile): Promise<HealthRecommendation[]>;\n  setPersonality(traits: any): void;\n  \n  // 四诊功能集成\n  startInquirySession(userId: string): Promise<any>;\n  analyzeImage(imageData: ImageData, type: 'face' | 'tongue' | 'body'): Promise<LookResult>;\n  analyzeAudio(audioData: AudioData, type: 'voice' | 'sound'): Promise<ListenResult>;\n  processPalpationData(data: PalpationData): Promise<PalpationResult>;\n  performFourDiagnosisIntegration(data: FourDiagnosisResults): Promise<IntegratedDiagnosis>;\n  \n  // 无障碍功能\n  enableAccessibilityFeature(feature: any): Promise<void>;\n  getAccessibilityStatus(): Promise<any>;\n  adaptInterfaceForDisability(disability: any): Promise<any>;\n}\n\n// 服务客户端接口\nexport interface DiagnosisServiceClient {\n  inquiry: InquiryServiceClient;\n  look: LookServiceClient;\n  listen: ListenServiceClient;\n  palpation: PalpationServiceClient;\n}\n\nexport interface InquiryServiceClient {\n  startSession(userId: string): Promise<any>;\n  interact(sessionId: string, message: string): Promise<any>;\n  endSession(sessionId: string): Promise<InquiryResult>;\n}\n\nexport interface LookServiceClient {\n  analyzeImage(imageData: ImageData): Promise<LookResult>;\n  batchAnalyze(images: ImageData[]): Promise<LookResult[]>;\n}\n\nexport interface ListenServiceClient {\n  analyzeAudio(audioData: AudioData): Promise<ListenResult>;\n  analyzeVoiceFeatures(audioData: AudioData): Promise<VoiceFeatures>;\n}\n\nexport interface PalpationServiceClient {\n  analyzePalpation(data: PalpationData): Promise<PalpationResult>;\n  startRealTimeMonitoring(userId: string): Promise<string>;\n} "],"mappings":"","ignoreList":[]}