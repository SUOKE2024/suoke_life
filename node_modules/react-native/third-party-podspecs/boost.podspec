# Copyright (c) Meta Platforms, Inc. and affiliates.
#
# This source code is licensed under the MIT license found in the
# LICENSE file in the root directory of this source tree.

boost_config = get_boost_config()

Pod::Spec.new do |spec|
  spec.name = 'boost'
  spec.version = '1.84.0'
  spec.license = { :type => 'Boost Software License', :file => "LICENSE_1_0.txt" }
  spec.homepage = 'http://www.boost.org'
  spec.summary = 'Boost provides free peer-reviewed portable C++ source libraries.'
  spec.authors = 'Rene Rivera'
  
  # 使用本地源，避免网络下载问题
  spec.source = { :git => File.join(__dir__, ".") }

  # Pinning to the same version as React.podspec.
  spec.platforms = min_supported_versions
  spec.requires_arc = false
  spec.source_files = '**/*.h'
  spec.header_mappings_dir = '.'
  
  spec.preserve_paths = 'boost/**/*.h', 'boost/**/*.hpp', 'boost/**/*.ipp'
  
  # Create a dummy boost directory so cocoapods doesn't fail
  spec.prepare_command = <<-CMD
    mkdir -p boost
    echo "#ifndef BOOST_VERSION_HPP" > boost/version.hpp
    echo "#define BOOST_VERSION_HPP" >> boost/version.hpp
    echo "#define BOOST_VERSION 108400" >> boost/version.hpp
    echo "#define BOOST_LIB_VERSION \"1_84\"" >> boost/version.hpp
    echo "#endif" >> boost/version.hpp
  CMD
end
