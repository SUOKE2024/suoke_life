# ç´¢å…‹ç”Ÿæ´»äººå·¥å®¡æ ¸æœåŠ¡

äººå·¥å®¡æ ¸æœåŠ¡æ˜¯ç´¢å…‹ç”Ÿæ´»å¹³å°çš„æ ¸å¿ƒè´¨é‡æ§åˆ¶ç»„ä»¶ï¼Œæä¾›AIè¾…åŠ©çš„äººå·¥å®¡æ ¸åŠŸèƒ½ï¼Œç¡®ä¿å¹³å°å†…å®¹å’Œè¯Šæ–­ç»“æœçš„å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### æ™ºèƒ½å®¡æ ¸ç³»ç»Ÿ
- **AIè¾…åŠ©é¢„å®¡** - ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œåˆæ­¥å†…å®¹ç­›é€‰
- **å¤šç»´åº¦è´¨é‡è¯„ä¼°** - ä»å‡†ç¡®æ€§ã€å®‰å…¨æ€§ã€åˆè§„æ€§ç­‰è§’åº¦è¯„ä¼°å†…å®¹
- **æ™ºèƒ½ä¼˜å…ˆçº§æ’åº** - æ ¹æ®é£é™©ç­‰çº§è‡ªåŠ¨åˆ†é…å®¡æ ¸ä¼˜å…ˆçº§
- **å®æ—¶å¼‚å¸¸æ£€æµ‹** - è¯†åˆ«å¯ç–‘å†…å®¹å’Œå¼‚å¸¸è¡Œä¸ºæ¨¡å¼

### ä¸“ä¸šå®¡æ ¸æµç¨‹
- **åˆ†å±‚å®¡æ ¸æœºåˆ¶** - åˆå®¡ã€å¤å®¡ã€ç»ˆå®¡çš„å¤šå±‚è´¨é‡ä¿éšœ
- **ä¸“å®¶åä½œå¹³å°** - æ”¯æŒå¤šä¸“å®¶ååŒå®¡æ ¸å’Œæ„è§æ±‡æ€»
- **å®¡æ ¸æ ‡å‡†ç®¡ç†** - å¯é…ç½®çš„å®¡æ ¸è§„åˆ™å’Œè¯„åˆ†æ ‡å‡†
- **å®¡æ ¸å†å²è¿½è¸ª** - å®Œæ•´çš„å®¡æ ¸è¿‡ç¨‹è®°å½•å’Œå¯è¿½æº¯æ€§

### å†…å®¹ç±»å‹æ”¯æŒ
- **åŒ»å­¦è¯Šæ–­ç»“æœ** - ä¸­åŒ»è¾¨è¯ã€è¥¿åŒ»è¯Šæ–­çš„ä¸“ä¸šå®¡æ ¸
- **å¥åº·å»ºè®®å†…å®¹** - å…»ç”Ÿæ–¹æ¡ˆã€ç”¨è¯å»ºè®®çš„å®‰å…¨æ€§å®¡æ ¸
- **ç”¨æˆ·ç”Ÿæˆå†…å®¹** - ç¤¾åŒºåˆ†äº«ã€ç»éªŒäº¤æµçš„åˆè§„æ€§å®¡æ ¸
- **å¤šåª’ä½“å†…å®¹** - å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘çš„æ™ºèƒ½è¯†åˆ«å’Œå®¡æ ¸

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
äººå·¥å®¡æ ¸æœåŠ¡
â”œâ”€â”€ AIé¢„å®¡å¼•æ“
â”‚   â”œâ”€â”€ æ–‡æœ¬åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ å›¾åƒè¯†åˆ«æ¨¡å—
â”‚   â”œâ”€â”€ é£é™©è¯„ä¼°æ¨¡å—
â”‚   â””â”€â”€ ä¼˜å…ˆçº§æ’åºæ¨¡å—
â”œâ”€â”€ å®¡æ ¸å·¥ä½œæµ
â”‚   â”œâ”€â”€ ä»»åŠ¡åˆ†å‘ç³»ç»Ÿ
â”‚   â”œâ”€â”€ å®¡æ ¸å‘˜ç®¡ç†
â”‚   â”œâ”€â”€ è´¨é‡æ§åˆ¶
â”‚   â””â”€â”€ è¿›åº¦è·Ÿè¸ª
â”œâ”€â”€ ä¸“å®¶åä½œå¹³å°
â”‚   â”œâ”€â”€ å¤šäººåä½œ
â”‚   â”œâ”€â”€ æ„è§æ±‡æ€»
â”‚   â”œâ”€â”€ äº‰è®®è§£å†³
â”‚   â””â”€â”€ çŸ¥è¯†å…±äº«
â””â”€â”€ æ•°æ®ç®¡ç†
    â”œâ”€â”€ å®¡æ ¸è®°å½•
    â”œâ”€â”€ ç»Ÿè®¡åˆ†æ
    â”œâ”€â”€ æ€§èƒ½ç›‘æ§
    â””â”€â”€ åˆè§„æŠ¥å‘Š
```

## ğŸš€ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Python 3.13.3
- **æ¡†æ¶**: FastAPI + Celery
- **æ•°æ®åº“**: PostgreSQL + Redis
- **AIå¼•æ“**: PyTorch + Transformers + Sentence-Transformers
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ + Redis
- **æ–‡ä»¶å­˜å‚¨**: MinIO + AWS S3
- **ç›‘æ§**: Prometheus + Grafana + OpenTelemetry
- **éƒ¨ç½²**: Docker + Kubernetes

## ğŸ“ é¡¹ç›®ç»“æ„

```
human-review-service/
â”œâ”€â”€ api/                      # APIå®šä¹‰
â”‚   â”œâ”€â”€ grpc/                 # gRPCæœåŠ¡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ review.proto      # å®¡æ ¸æœåŠ¡åè®®
â”‚   â”‚   â””â”€â”€ workflow.proto    # å·¥ä½œæµåè®®
â”‚   â””â”€â”€ rest/                 # REST APIå®šä¹‰
â”‚       â”œâ”€â”€ review_api.py     # å®¡æ ¸API
â”‚       â””â”€â”€ admin_api.py      # ç®¡ç†API
â”œâ”€â”€ cmd/                      # æœåŠ¡å…¥å£ç‚¹
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.py           # ä¸»æœåŠ¡å™¨
â”œâ”€â”€ internal/                 # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ai/                   # AIå®¡æ ¸å¼•æ“
â”‚   â”‚   â”œâ”€â”€ text_analyzer.py  # æ–‡æœ¬åˆ†æ
â”‚   â”‚   â”œâ”€â”€ image_analyzer.py # å›¾åƒåˆ†æ
â”‚   â”‚   â”œâ”€â”€ risk_assessor.py  # é£é™©è¯„ä¼°
â”‚   â”‚   â””â”€â”€ priority_ranker.py # ä¼˜å…ˆçº§æ’åº
â”‚   â”œâ”€â”€ workflow/             # å®¡æ ¸å·¥ä½œæµ
â”‚   â”‚   â”œâ”€â”€ task_manager.py   # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ reviewer_manager.py # å®¡æ ¸å‘˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ quality_control.py # è´¨é‡æ§åˆ¶
â”‚   â”‚   â””â”€â”€ progress_tracker.py # è¿›åº¦è·Ÿè¸ª
â”‚   â”œâ”€â”€ collaboration/        # ä¸“å®¶åä½œ
â”‚   â”‚   â”œâ”€â”€ expert_system.py  # ä¸“å®¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ opinion_aggregator.py # æ„è§æ±‡æ€»
â”‚   â”‚   â””â”€â”€ dispute_resolver.py # äº‰è®®è§£å†³
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ review_models.py  # å®¡æ ¸æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ task_models.py    # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user_models.py    # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ repository/           # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ review_repository.py
â”‚   â”‚   â”œâ”€â”€ task_repository.py
â”‚   â”‚   â””â”€â”€ user_repository.py
â”‚   â”œâ”€â”€ service/              # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ review_service.py # å®¡æ ¸æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ai_service.py     # AIæœåŠ¡
â”‚   â”‚   â””â”€â”€ workflow_service.py # å·¥ä½œæµæœåŠ¡
â”‚   â””â”€â”€ config/               # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ settings.py       # è®¾ç½®
â”‚       â””â”€â”€ ai_config.py      # AIé…ç½®
â”œâ”€â”€ pkg/                      # å¯å¯¼å‡ºåŒ…
â”‚   â”œâ”€â”€ middleware/           # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ cli/                  # å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ test/                     # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                  # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ deploy/                   # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ docker/               # Dockeré…ç½®
â”‚   â””â”€â”€ kubernetes/           # K8sé…ç½®
â”œâ”€â”€ migrations/               # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â””â”€â”€ scripts/                  # è„šæœ¬å·¥å…·
```

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.13.3+
- PostgreSQL 13+
- Redis 6+
- RabbitMQ 3.8+
- Docker & Docker Compose

### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨UVåŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨pip
pip install -e .
```

### é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

### å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘ç¯å¢ƒ
docker-compose up -d
python -m cmd.server.main

# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.prod.yml up -d
```

### å¯åŠ¨Celeryå·¥ä½œè¿›ç¨‹
```bash
# å¯åŠ¨å®¡æ ¸å·¥ä½œè¿›ç¨‹
celery -A internal.tasks.celery_app worker --loglevel=info --queues=review

# å¯åŠ¨AIåˆ†æå·¥ä½œè¿›ç¨‹
celery -A internal.tasks.celery_app worker --loglevel=info --queues=ai_analysis

# å¯åŠ¨Flowerç›‘æ§
celery -A internal.tasks.celery_app flower
```

## ğŸ“Š APIæ–‡æ¡£

### REST API
æœåŠ¡å¯åŠ¨åè®¿é—®ä»¥ä¸‹ç«¯ç‚¹è·å–APIæ–‡æ¡£ï¼š
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

### gRPC API
æŸ¥çœ‹ `api/grpc/` ç›®å½•ä¸‹çš„ `.proto` æ–‡ä»¶è·å–gRPCæ¥å£å®šä¹‰ã€‚

### ä¸»è¦APIç«¯ç‚¹

#### å®¡æ ¸ç®¡ç†
```http
POST /api/v1/reviews/submit          # æäº¤å®¡æ ¸ä»»åŠ¡
GET  /api/v1/reviews/{review_id}     # è·å–å®¡æ ¸è¯¦æƒ…
PUT  /api/v1/reviews/{review_id}     # æ›´æ–°å®¡æ ¸çŠ¶æ€
GET  /api/v1/reviews/queue           # è·å–å®¡æ ¸é˜Ÿåˆ—
```

#### AIé¢„å®¡
```http
POST /api/v1/ai/pre-review           # AIé¢„å®¡æ ¸
GET  /api/v1/ai/risk-assessment      # é£é™©è¯„ä¼°
POST /api/v1/ai/content-analysis     # å†…å®¹åˆ†æ
```

#### å·¥ä½œæµç®¡ç†
```http
GET  /api/v1/workflow/tasks          # è·å–ä»»åŠ¡åˆ—è¡¨
POST /api/v1/workflow/assign         # åˆ†é…ä»»åŠ¡
PUT  /api/v1/workflow/complete       # å®Œæˆä»»åŠ¡
GET  /api/v1/workflow/statistics     # å·¥ä½œæµç»Ÿè®¡
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest test/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest test/integration/

# è¿è¡Œæ€§èƒ½æµ‹è¯•
pytest test/performance/ --benchmark-only

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=internal --cov-report=html
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡: â‰¥90%
- é›†æˆæµ‹è¯•è¦†ç›–ç‡: â‰¥80%
- ç«¯åˆ°ç«¯æµ‹è¯•è¦†ç›–ç‡: â‰¥70%

## ğŸ“ˆ ç›‘æ§å’ŒæŒ‡æ ‡

### PrometheusæŒ‡æ ‡
- `review_tasks_total` - å®¡æ ¸ä»»åŠ¡æ€»æ•°
- `review_processing_duration` - å®¡æ ¸å¤„ç†æ—¶é•¿
- `ai_analysis_accuracy` - AIåˆ†æå‡†ç¡®ç‡
- `reviewer_workload` - å®¡æ ¸å‘˜å·¥ä½œè´Ÿè½½
- `quality_score_distribution` - è´¨é‡åˆ†æ•°åˆ†å¸ƒ

### å¥åº·æ£€æŸ¥
```bash
# æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8000/health

# è¯¦ç»†å¥åº·æ£€æŸ¥
curl http://localhost:8000/health/detailed

# AIå¼•æ“çŠ¶æ€
curl http://localhost:8000/health/ai
```

## ğŸ” å®‰å…¨ç‰¹æ€§

- **æ•°æ®åŠ å¯†** - ä¼ è¾“å’Œå­˜å‚¨æ•°æ®çš„ç«¯åˆ°ç«¯åŠ å¯†
- **è®¿é—®æ§åˆ¶** - åŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™ç®¡ç†
- **å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®¡è®¡è¿½è¸ª
- **éšç§ä¿æŠ¤** - æ•æ„Ÿä¿¡æ¯çš„è„±æ•å’ŒåŒ¿ååŒ–å¤„ç†
- **åˆè§„æ£€æŸ¥** - ç¬¦åˆåŒ»ç–—æ•°æ®ä¿æŠ¤æ³•è§„è¦æ±‚

## ğŸš€ éƒ¨ç½²

### Dockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t human-review-service:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name human-review-service \
  -p 8000:8000 \
  -e DATABASE_URL=postgresql://... \
  human-review-service:latest
```

### Kuberneteséƒ¨ç½²
```bash
# åº”ç”¨é…ç½®
kubectl apply -f deploy/kubernetes/

# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
kubectl get pods -l app=human-review-service

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f deployment/human-review-service
```

## ğŸ“š æ–‡æ¡£

- [APIæ–‡æ¡£](./docs/api/) - å®Œæ•´çš„APIæ¥å£æ–‡æ¡£
- [éƒ¨ç½²æŒ‡å—](./docs/deployment/) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—
- [å¼€å‘æŒ‡å—](./docs/development/) - å¼€å‘è€…æŒ‡å—
- [AIæ¨¡å‹æ–‡æ¡£](./docs/ai/) - AIå¼•æ“ä½¿ç”¨è¯´æ˜
- [å·¥ä½œæµé…ç½®](./docs/workflow/) - å®¡æ ¸å·¥ä½œæµé…ç½®æŒ‡å—

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](./LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- **æŠ€æœ¯æ”¯æŒ**: tech@suoke.life
- **äº§å“å’¨è¯¢**: product@suoke.life
- **å•†åŠ¡åˆä½œ**: business@suoke.life

---

**ç´¢å…‹ç”Ÿæ´»äººå·¥å®¡æ ¸æœåŠ¡ - ç¡®ä¿å¹³å°å†…å®¹è´¨é‡å’Œç”¨æˆ·å®‰å…¨** ğŸ›¡ï¸ 