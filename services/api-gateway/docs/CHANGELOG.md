# 变更日志

本文档记录了索克生活 API 网关项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [未发布]

### 新增
- 完整的项目重构，采用现代化 Python 工具链
- 使用 UV 包管理器和 Python 3.13
- 基于 Pydantic Settings 的配置管理系统
- 结构化日志记录（structlog）
- 完整的中间件系统（认证、限流、安全、追踪）
- 多种负载均衡策略（轮询、加权轮询、最少连接、随机）
- 熔断器模式实现
- 智能重试机制
- 分布式缓存管理
- 健康检查系统
- gRPC 服务支持
- Prometheus 指标导出
- 完整的测试套件
- 自动化部署脚本
- Kubernetes 部署配置
- Pre-commit 钩子和代码质量检查

### 变更
- 项目结构完全重组，采用模块化设计
- 配置系统从 YAML 迁移到 Pydantic Settings
- 日志系统从标准 logging 升级到 structlog
- 依赖管理从 pip 迁移到 UV
- 代码质量工具从 flake8/black 升级到 Ruff
- 容器化从 Docker 优化为支持多种运行时

### 修复
- 修复了原有的内存泄漏问题
- 改进了错误处理和异常管理
- 优化了性能和资源使用

### 移除
- 移除了过时的依赖项
- 清理了冗余的配置文件
- 删除了不再使用的工具脚本

## [1.0.0] - 2024-01-01

### 新增
- 初始版本发布
- 基本的 API 网关功能
- 服务注册与发现
- 负载均衡
- 请求代理
- 基础认证
- 简单的健康检查

### 已知问题
- 配置管理较为简单
- 缺乏完整的监控系统
- 测试覆盖率不足
- 文档不够完善

---

## 版本说明

### 版本号格式
项目采用语义化版本号格式：`主版本号.次版本号.修订号`

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 变更类型
- **新增**：新功能
- **变更**：对现有功能的变更
- **弃用**：即将移除的功能
- **移除**：已移除的功能
- **修复**：问题修复
- **安全**：安全相关的修复

### 发布周期
- **主版本**：根据需要发布，通常包含重大架构变更
- **次版本**：每月发布，包含新功能和改进
- **修订版本**：根据需要发布，主要用于 bug 修复

### 支持策略
- **当前版本**：完全支持，包含新功能和 bug 修复
- **前一个主版本**：仅提供安全更新和关键 bug 修复
- **更早版本**：不再提供支持

### 迁移指南
重大版本升级时，我们会提供详细的迁移指南，包括：
- 不兼容变更列表
- 迁移步骤说明
- 示例代码更新
- 常见问题解答

### 贡献变更日志
如果您为项目做出了贡献，请在 Pull Request 中更新此变更日志：

1. 在 `[未发布]` 部分添加您的变更
2. 使用适当的变更类型分类
3. 简洁明了地描述变更内容
4. 如果适用，包含相关的 Issue 或 PR 编号

示例：
```markdown
### 新增
- 添加新的负载均衡策略 (#123)
- 支持自定义健康检查端点 (#124)

### 修复
- 修复 Redis 连接池泄漏问题 (#125)
``` 